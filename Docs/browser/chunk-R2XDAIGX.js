import{a as R,b as p,c as A,d as K,e as B,f as V,g as q,h as N,k as z,l as U}from"./chunk-ZEI36HEG.js";import{Aa as y,Bb as k,Cb as T,Db as E,Ib as D,Ma as s,Na as u,Qa as f,Ra as l,Sa as i,Ta as _,Wa as x,X as b,Xa as C,Y as g,Za as d,bb as h,cb as a,d as M,db as F,eb as S,gb as P,ib as O,jb as w,ra as c,va as v}from"./chunk-EFIKYLJJ.js";function I(e,o){e&1&&a(0," Fill up cost is required ")}function j(e,o){e&1&&a(0," Fill up cost must be greater than 0 ")}function $(e,o){if(e&1&&(l(0,"div",11),s(1,I,1,0),s(2,j,1,0),i()),e&2){let t,n,r=d(2);c(),u(!((t=r.calculateForm.get("fillUpCost"))==null||t.errors==null)&&t.errors.required?1:-1),c(),u(!((n=r.calculateForm.get("fillUpCost"))==null||n.errors==null)&&n.errors.min?2:-1)}}function Y(e,o){e&1&&a(0," Distance before fill up is required ")}function Z(e,o){e&1&&a(0," Distance must be 0 or greater ")}function H(e,o){if(e&1&&(l(0,"div",11),s(1,Y,1,0),s(2,Z,1,0),i()),e&2){let t,n,r=d(2);c(),u(!((t=r.calculateForm.get("distanceBefore"))==null||t.errors==null)&&t.errors.required?1:-1),c(),u(!((n=r.calculateForm.get("distanceBefore"))==null||n.errors==null)&&n.errors.min?2:-1)}}function J(e,o){e&1&&a(0," Distance after fill up is required ")}function L(e,o){e&1&&a(0," Distance must be greater than 0 ")}function Q(e,o){if(e&1&&(l(0,"div",11),s(1,J,1,0),s(2,L,1,0),i()),e&2){let t,n,r=d(2);c(),u(!((t=r.calculateForm.get("distanceAfter"))==null||t.errors==null)&&t.errors.required?1:-1),c(),u(!((n=r.calculateForm.get("distanceAfter"))==null||n.errors==null)&&n.errors.min?2:-1)}}function W(e,o){if(e&1){let t=x();l(0,"div",17)(1,"div",18)(2,"div",19),a(3,"Distance Traveled:"),i(),l(4,"div",20),a(5),P(6,"number"),i()(),l(7,"div",18)(8,"div",19),a(9,"Calculated Cost per Km:"),i(),l(10,"div",21),a(11),P(12,"currency"),i()(),l(13,"button",22),C("click",function(){b(t);let r=d(2);return g(r.applyCalculatedCost())}),a(14,"Apply This Cost"),i()()}if(e&2){let t=d(2);c(5),S("",O(6,2,t.calculationResult.distanceTraveled,"1.1-1")," km"),c(6),F(w(12,5,t.calculationResult.calculatedCostPerKm,"ZAR","symbol","1.2-2"))}}function X(e,o){if(e&1){let t=x();l(0,"div",4)(1,"div",5)(2,"h3"),a(3,"Calculate Cost per Km"),i(),l(4,"p",6),a(5,"Enter your fuel costs and distances to automatically calculate your cost per kilometer."),i(),l(6,"form",7),C("ngSubmit",function(){b(t);let r=d();return g(r.onCalculateSubmit())}),l(7,"div",8)(8,"label",9),a(9,"Cost to Fill Up Car (R)"),i(),_(10,"input",10),s(11,$,3,2,"div",11),i(),l(12,"div",8)(13,"label",12),a(14,"Distance Before Fill Up (km)"),i(),_(15,"input",13),s(16,H,3,2,"div",11),i(),l(17,"div",8)(18,"label",14),a(19,"Distance After Fill Up (km)"),i(),_(20,"input",15),s(21,Q,3,2,"div",11),i(),l(22,"button",16),a(23," Calculate Cost per Km "),i()(),s(24,W,15,10,"div",17),i()()}if(e&2){let t,n,r,m=d();c(6),f("formGroup",m.calculateForm),c(5),u((t=m.calculateForm.get("fillUpCost"))!=null&&t.invalid&&((t=m.calculateForm.get("fillUpCost"))!=null&&t.touched)?11:-1),c(5),u((n=m.calculateForm.get("distanceBefore"))!=null&&n.invalid&&((n=m.calculateForm.get("distanceBefore"))!=null&&n.touched)?16:-1),c(5),u((r=m.calculateForm.get("distanceAfter"))!=null&&r.invalid&&((r=m.calculateForm.get("distanceAfter"))!=null&&r.touched)?21:-1),c(),f("disabled",m.calculateForm.invalid),c(2),u(m.showResult&&m.calculationResult?24:-1)}}function tt(e,o){e&1&&a(0," Cost per km is required ")}function et(e,o){e&1&&a(0," Cost per km must be greater than 0 ")}function nt(e,o){if(e&1&&(l(0,"div",11),s(1,tt,1,0),s(2,et,1,0),i()),e&2){let t,n,r=d(2);c(),u(!((t=r.manualForm.get("costPerKm"))==null||t.errors==null)&&t.errors.required?1:-1),c(),u(!((n=r.manualForm.get("costPerKm"))==null||n.errors==null)&&n.errors.min?2:-1)}}function ot(e,o){if(e&1){let t=x();l(0,"div",4)(1,"div",5)(2,"h3"),a(3,"Set Price Manually"),i(),l(4,"p",6),a(5,"Manually set your cost per kilometer if you already know the value."),i(),l(6,"form",7),C("ngSubmit",function(){b(t);let r=d();return g(r.onManualSubmit())}),l(7,"div",8)(8,"label",23),a(9,"Cost per Km (R)"),i(),_(10,"input",24),s(11,nt,3,2,"div",11),i(),l(12,"button",25),a(13," Save Cost per Km "),i()()()()}if(e&2){let t,n=d();c(6),f("formGroup",n.manualForm),c(5),u((t=n.manualForm.get("costPerKm"))!=null&&t.invalid&&((t=n.manualForm.get("costPerKm"))!=null&&t.touched)?11:-1),c(),f("disabled",n.manualForm.invalid)}}var G=class e{constructor(o,t){this.fb=o;this.costCalculationService=t;this.costSettings$=this.costCalculationService.costSettings$,this.calculateForm=this.createCalculateForm(),this.manualForm=this.createManualForm()}costSettings$;activeTab="calculate";calculateForm;manualForm;calculationResult=null;showResult=!1;subscription=new M;ngOnInit(){this.subscription.add(this.costSettings$.subscribe(o=>{this.manualForm.patchValue({costPerKm:o.currentCostPerKm})}))}ngOnDestroy(){this.subscription.unsubscribe()}createCalculateForm(){return this.fb.group({fillUpCost:["",[p.required,p.min(.01)]],distanceBefore:["",[p.required,p.min(0)]],distanceAfter:["",[p.required,p.min(.1)]]})}createManualForm(){return this.fb.group({costPerKm:["",[p.required,p.min(.01)]]})}setActiveTab(o){this.activeTab=o,this.showResult=!1,this.calculationResult=null}onCalculateSubmit(){if(this.calculateForm.valid)try{let o=this.calculateForm.value;this.calculationResult=this.costCalculationService.calculateCostPerKm(o),this.showResult=!0}catch(o){alert(o.message)}}onManualSubmit(){if(this.manualForm.valid)try{let o=this.manualForm.value;this.costCalculationService.setManualCost(o),alert("Cost per km has been updated successfully!")}catch(o){alert(o.message)}}applyCalculatedCost(){this.calculationResult&&(this.costCalculationService.applyCalculatedCost(this.calculationResult),alert("Cost per km has been updated successfully!"),this.calculateForm.reset(),this.showResult=!1,this.calculationResult=null)}static \u0275fac=function(t){return new(t||e)(v(z),v(D))};static \u0275cmp=y({type:e,selectors:[["app-calculate-cost"]],decls:11,vars:6,consts:[[1,"page-header"],[1,"cost-options"],[1,"option-tabs"],[1,"tab-btn",3,"click"],[1,"tab-content"],[1,"cost-card"],[1,"description"],[1,"cost-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fillUpCost"],["type","number","id","fillUpCost","formControlName","fillUpCost","step","0.01","placeholder","e.g., 800.00"],[1,"error-message"],["for","distanceBefore"],["type","number","id","distanceBefore","formControlName","distanceBefore","step","0.1","placeholder","e.g., 150250.5"],["for","distanceAfter"],["type","number","id","distanceAfter","formControlName","distanceAfter","step","0.1","placeholder","e.g., 150650.5"],["type","submit",1,"calculate-btn",3,"disabled"],[1,"calculation-result"],[1,"result-info"],[1,"result-label"],[1,"result-value"],[1,"result-value","primary"],[1,"apply-btn",3,"click"],["for","manualCost"],["type","number","id","manualCost","formControlName","costPerKm","step","0.01","placeholder","e.g., 2.50"],["type","submit",1,"save-btn",3,"disabled"]],template:function(t,n){t&1&&(l(0,"header",0)(1,"h1"),a(2,"Calculate Cost per Km"),i()(),l(3,"div",1)(4,"div",2)(5,"button",3),C("click",function(){return n.setActiveTab("calculate")}),a(6," Calculate Cost "),i(),l(7,"button",3),C("click",function(){return n.setActiveTab("manual")}),a(8," Set Price Manually "),i()(),s(9,X,25,6,"div",4),s(10,ot,14,3,"div",4),i()),t&2&&(c(5),h("active",n.activeTab==="calculate"),c(2),h("active",n.activeTab==="manual"),c(2),u(n.activeTab==="calculate"?9:-1),c(),u(n.activeTab==="manual"?10:-1))},dependencies:[E,U,B,R,V,A,K,q,N,k,T],styles:['.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;background:#ffffffe6;padding:1.25rem 1.5rem;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 32px #0000001a}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2d3748;font-size:1.75rem;font-weight:700}.cost-options[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 32px #0000001a;overflow:hidden}.option-tabs[_ngcontent-%COMP%]{display:flex;background:#0000000d}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:1rem 1.5rem;background:transparent;border:none;color:#718096;font-weight:600;cursor:pointer;transition:all .2s ease;position:relative;font-size:.9rem}.tab-btn[_ngcontent-%COMP%]:hover{background:#667eea1a;color:#667eea}.tab-btn.active[_ngcontent-%COMP%]{background:#ffffffe6;color:#667eea;box-shadow:0 -2px 8px #0000001a}.tab-btn.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(135deg,#667eea,#764ba2)}.tab-content[_ngcontent-%COMP%]{padding:0}.cost-card[_ngcontent-%COMP%]{padding:2rem}.cost-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:1.5rem;font-weight:700;margin-bottom:.5rem}.description[_ngcontent-%COMP%]{color:#718096;margin-bottom:2rem;line-height:1.6}.cost-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#2d3748;font-weight:600;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid rgba(0,0,0,.1);border-radius:12px;font-size:.875rem;transition:all .2s ease;background:#fffc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;background:#fffffff2}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ff6b6b;background:#ff6b6b0d}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.75rem;margin-top:.25rem;font-weight:500}.calculate-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 15px #667eea4d;font-size:.9rem;margin-top:1rem}.calculate-btn[_ngcontent-%COMP%]:hover:not(:disabled), .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea66}.calculate-btn[_ngcontent-%COMP%]:disabled, .save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.calculation-result[_ngcontent-%COMP%]{margin-top:2rem;padding:1.5rem;background:#48bb781a;border:2px solid rgba(72,187,120,.2);border-radius:16px}.result-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.result-info[_ngcontent-%COMP%]:last-of-type{margin-bottom:1.5rem}.result-label[_ngcontent-%COMP%]{color:#2d3748;font-weight:600;font-size:.9rem}.result-value[_ngcontent-%COMP%]{color:#48bb78;font-weight:700;font-size:1rem}.result-value.primary[_ngcontent-%COMP%]{font-size:1.25rem;color:#38a169}.apply-btn[_ngcontent-%COMP%]{width:100%;padding:.875rem;background:linear-gradient(135deg,#48bb78,#38a169);color:#fff;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 15px #48bb784d;font-size:.9rem}.apply-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #48bb7866}@media (max-width: 768px){.cost-card[_ngcontent-%COMP%]{padding:1.5rem}.option-tabs[_ngcontent-%COMP%]{flex-direction:column}.tab-btn[_ngcontent-%COMP%]{text-align:center}.result-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}}']})};export{G as CalculateCostComponent};
